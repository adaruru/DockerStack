services:
  its-nuget:
    image: loicsharma/baget:latest
    container_name: its-nuget
    ports:
    - "29:80"
    environment:
    - ApiKey=html5!its
    - Storage__Type=FileSystem # 設定存儲類型為檔案系統
    - Storage__Path=/var/packages
    volumes:
    - C:/Users/Administrator/Volumes/nuget/storage/app/baget.db:/app/baget.db
    - C:/Users/Administrator/Volumes/nuget/storage/packages:/var/packages
    restart: always

  its-verdaccio:
    image: verdaccio/verdaccio:latest
    container_name: its-verdaccio
    ports:
    - "4873:4873"
    volumes:
    - C:/Users/Administrator/Volumes/verdaccio/storage:/verdaccio/storage
    - C:/Users/Administrator/Volumes/verdaccio/conf:/verdaccio/conf
    restart: always

  its-portainer:
    image: portainer/portainer-ce:2.21.5
    container_name: its-portainer
    ports:
    - "9000:9000"
    environment:
    - DOCKER_HOST=tcp://host.docker.internal:2375
    volumes:
    - C:/Users/Administrator/Volumes/portainer/storage:/data
    restart: always

  its-certcenter:
    image: 192.168.100.63:5000/its-certcenter
    container_name: its-certcenter
    ports:
    - "9250:9250"
    environment:
    - ACME_ACCOUNT=itsower567@gmail.com
    - ACME_DNS_API=https://auth.acme-dns.io/register
    # 務必成功執行之後再掛出憑證儲存目錄
    # windows 無法掛出*號目錄，故一個憑證申請對應一個目錄，請勿共用
    volumes:
    - C:/Users/Administrator/Volumes/its-certcenter/storage:/its-certcenter/*.itsower.com.tw
    restart: always
